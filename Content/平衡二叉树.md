---
tags:
  - 平衡二叉树
  - 排序二叉树
sda:
---
数据结构动画[参考视频 ](https://www.bilibili.com/video/BV1tZ421q72h?spm_id_from=333.788.videopod.sections&vd_source=ef7a79a9d397bb3255e72c973e38ce01)
## What
平衡二叉树和排序二叉树的部分相同，区别在于平衡二叉树就是排序二叉树的升级版本。

***

## Why
在排序二叉树中，如果数组是已经排过序的数组，那么就会出现严重的失衡，导致带查找数据的时候没有发挥二分的优势，时间复杂度还是区域O(n)。所以有了平衡二叉树，通过每次插入来判断根节点是否失衡。如果失衡则通过旋转的方式调整

***
## When/Where
1. **场景管理**：
    
    - 平衡的BVH(包围体层次)加速碰撞检测
        
    - 动态场景对象的空间索引
        
2. **AI系统**：
    
    - 行为树的高效遍历
        
    - 决策优先级管理
        
3. **资源管理**：
    
    - 纹理、模型等资源的快速加载与释放
        
    - 内存池的高效管理
        
4. **物理引擎**：
    
    - 动态物体空间分区
        
    - 连续碰撞检测的对象对筛选
        
5. **游戏逻辑**：
    
    - 实时排行榜维护
        
    - 玩家数据的高效查询

***

## How
开始的插入数据的步骤与前面的二叉排序树相同。
不同的是一下部分
- 插入数据后，对插入元素的父节点的父节点，也就是子树的根的高度进行判断
- 如果根中的左右节点的高度相减得到平衡因子（左减右），如果平衡大于1或者小于-1，当前节点失衡
- 如果平衡因子为-1时为右子树失衡
- 反之则是左子树失衡
- 由于左右子树可能还有子树，所以需要再判断失衡的具体插入节点是在左/右子树的那一边。
- 由此可以分出四个种类状况：LL LR RR RL
- LL可以通过右旋转（类似将树从中间折断的方式）调整平衡
- RR通过左旋调整
- LR通过 先左旋再右旋调整
- RL通过 先右旋再左旋调整
