---
tags:
  - 哈夫曼树
  - 哈夫曼编码
sda:
---

## What
哈夫曼树（最优二叉树）是一种**带权路径长度最短的二叉树**，用于数据压缩领域。

***

## Why
它对于重复次数多的数据有较强的压缩性，通过权值保证权值最大的接单路径最短，就像如果你每天都要上班，那尽量组一个近一点的房子，可以为你节省相当多的时间。

***
## When/Where
它主要用于编码和数据压缩领域。
- **频率高的字符用短编码**，频率低的字符用长编码，使得整体编码长度最小化。
    
- 通过**贪心算法（Greedy Algorithm）**构建，每次合并权值最小的两个节点。
1. **ZIP/GZIP压缩**：文件压缩的核心算法之一。
    
2. **JPEG/MP3编码**：图像和音频压缩的辅助手段。
    
3. **通信协议**：如HTTP/2的HPACK头部压缩。
    
4. **数据库存储**：优化字段编码减少磁盘占用。

#### **与普通编码的对比**

| 对比项       | 定长编码（如ASCII） | 哈夫曼编码      |
| --------- | ------------ | ---------- |
| **码长**    | 固定（8bit/字符）  | 可变（高频字符更短） |
| **压缩率**   | 无压缩          | 最优压缩       |
| **解码复杂度** | 直接映射         | 需查哈夫曼树     |
| **适用场景**  | 通用文本         | 频率分布不均的数据  |

***

## How
**构建步骤**：

1. **统计字符频率**：如字符串 `"ABRACADABRA"`，统计每个字符的出现次数：
    
    - A: 5次
        
    - B: 2次
        
    - R: 2次
        
    - C: 1次
        
    - D: 1次
        
2. **构建优先队列（最小堆）**：按频率从小到大排列：
`[C(1), D(1), B(2), R(2), A(5)]`
3. **循环合并最小两个节点**，直到只剩一个根节点：
    
    - 合并 `C(1)` + `D(1)` → 新节点 `CD(2)`
        
    - 合并 `B(2)` + `R(2)` → 新节点 `BR(4)`
        
    - 合并 `CD(2)` + `BR(4)` → 新节点 `CDBR(6)`
        
    - 合并 `A(5)` + `CDBR(6)` → 最终根节点 `ACDBR(11)`
        
4. **最终哈夫曼树**：
```
          (11)
         /    \
       A(5)  (6)
            /    \
         (2)    (4)
        /  \    /  \
      C(1)D(1)B(2)R(2)
```

    

**特点**：

- **没有度为1的节点**（所有非叶子节点都有两个子节点）。
    
- **权值越大的节点越靠近根**，权值越小的节点越远离根。

#### **2. 哈夫曼编码（Huffman Coding）**

**定义**：  
基于哈夫曼树的**可变长前缀编码**，用于无损数据压缩。

**编码规则**：

- **左路径标记为0，右路径标记为1**。
    
- 从根到叶子的路径即为该字符的编码。
    

**示例**（基于上述哈夫曼树）：

|字符|频率|编码|
|---|---|---|
|A|5|`0`|
|B|2|`110`|
|R|2|`111`|
|C|1|`100`|
|D|1|`101`|

**编码结果**：

- `"ABRACADABRA"` → `0 110 111 0 100 0 101 0 110 111 0`
    
- 原ASCII编码（假设8bit/字符）：`11×8=88 bits`
    
- 哈夫曼编码：仅需 `5×1 + 2×3 + 2×3 + 1×3 + 1×3 = 23 bits`，压缩率 **73.9%**！
    

**特点**：

- **前缀编码**：没有任何编码是另一个编码的前缀，避免解码歧义。
    
- **最优压缩**：在所有字符级编码中，哈夫曼编码的**平均码长最短**。

## **总结**

- **哈夫曼树**：通过贪心算法构建的最优二叉树，权值大的节点靠近根。
    
- **哈夫曼编码**：基于哈夫曼树的可变长前缀编码，实现高效数据压缩。
    
- **核心优势**：**高频短码，低频长码**，压缩率远超定长编码。